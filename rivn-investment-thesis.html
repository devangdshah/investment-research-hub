<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Investment Thesis: Rivian (RIVN)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.2/dist/chart.umd.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Chosen Palette: Serene Tech -->
    <!-- Application Structure Plan: A single-page application with a fixed top navigation bar and tabbed content sections. This dashboard-like structure (Thesis Summary, Business Model, Growth & Strategy, Financials & Risks) allows users to explore the investment thesis in thematic, digestible chunks. The non-linear navigation empowers users to jump to sections of interest, prioritizing usability and exploration over a static, linear document format. This design choice makes the complex information more accessible and engaging. -->
    <!-- Visualization & Content Choices: The application translates textual data into interactive elements. Key financial metrics (revenue, net loss, gross profit) and operational metrics (production, deliveries) are visualized using Chart.js bar and line charts for trend analysis. Analyst sentiment is shown in a doughnut chart. Risks are presented in an accordion format for easy digestion. This approach aims to enhance user understanding and engagement, while strictly adhering to the NO SVG/Mermaid constraint. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <style>
        body {
            font-family: 'Poppins', sans-serif;
            background-color: #f8fafc; /* slate-50 */
            color: #1e293b; /* slate-800 */
        }
        .nav-link {
            transition: all 0.3s ease;
            cursor: pointer;
            border-bottom: 2px solid transparent;
        }
        .nav-link.active, .nav-link:hover {
            color: #334155; /* slate-700 */
            border-bottom-color: #4f46e5; /* indigo-600 */
        }
        .content-section {
            display: none;
        }
        .content-section.active {
            display: block;
        }
        .stat-card {
            background-color: white;
            border-radius: 0.75rem;
            padding: 1.5rem;
            box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        .stat-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .chart-container {
            position: relative;
            margin: auto;
            height: 350px;
            width: 100%;
            max-width: 800px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        .kpi-value {
            color: #4f46e5;
        }
        .kpi-label {
            color: #64748b;
        }
        .section-title {
            color: #1e293b; /* slate-800 */
        }
        .section-intro {
            color: #475569; /* slate-600 */
            max-width: 48rem;
            margin-left: auto;
            margin-right: auto;
        }
        .accordion-item button {
            transition: background-color 0.3s ease;
        }
        .accordion-item .accordion-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.5s ease-in-out;
        }
    </style>
</head>
<body class="antialiased">

    <header class="bg-white/80 backdrop-blur-sm sticky top-0 z-50 shadow-sm">
        <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <div class="flex items-center space-x-4">
                    <a href="index.html" class="text-slate-600 hover:text-slate-800 text-sm font-medium">
                        ‚Üê Back to Research Hub
                    </a>
                    <h1 class="text-xl font-bold text-slate-800">Rivian (RIVN) Thesis</h1>
                </div>
                <div class="hidden md:block">
                    <div class="ml-10 flex items-baseline space-x-4">
                        <a onclick="showSection('summary')" class="nav-link px-3 py-2 text-sm font-medium text-slate-500 active">Thesis Summary</a>
                        <a onclick="showSection('business')" class="nav-link px-3 py-2 text-sm font-medium text-slate-500">Business Model</a>
                        <a onclick="showSection('growth')" class="nav-link px-3 py-2 text-sm font-medium text-slate-500">Growth & Strategy</a>
                        <a onclick="showSection('financials')" class="nav-link px-3 py-2 text-sm font-medium text-slate-500">Financials & Risks</a>
                    </div>
                </div>
                <div class="md:hidden">
                    <select onchange="showSection(this.value)" class="bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5">
                        <option value="summary" selected>Summary</option>
                        <option value="business">Business Model</option>
                        <option value="growth">Growth & Strategy</option>
                        <option value="financials">Financials & Risks</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 md:py-12">
        <section id="summary" class="content-section active">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Rivian (RIVN) Investment Thesis: Powering the Electric Adventure</h2>
                <p class="mt-4 text-lg section-intro">
                    This report details the investment thesis for Rivian Automotive, Inc. (RIVN), an American electric vehicle (EV) manufacturer. We explore its market positioning, unique product offerings, operational progress, and strategic outlook.
                </p>
            </div>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                <div class="stat-card text-center">
                    <p class="text-sm font-medium kpi-label">Market Cap (June 2025)</p>
                    <p class="text-3xl font-bold mt-2 kpi-value">$15.59B</p>
                    <p class="text-xs text-slate-400 mt-1">As of June 27, 2025</p>
                </div>
                <div class="stat-card text-center">
                    <p class="text-sm font-medium kpi-label">Analyst Average Target</p>
                    <p class="text-3xl font-bold mt-2 kpi-value">$15.35</p>
                    <p class="text-xs text-slate-400 mt-1">Avg. target from Fintel (June 2025)</p>
                </div>
                <div class="stat-card text-center">
                    <p class="text-sm font-medium kpi-label">Q1 2025 Revenue</p>
                    <p class="text-3xl font-bold mt-2 kpi-value">$1.24B</p>
                    <p class="text-xs text-slate-400 mt-1">Exceeded expectations</p>
                </div>
                <div class="stat-card text-center">
                    <p class="text-sm font-medium kpi-label">Q1 2025 Deliveries</p>
                    <p class="text-3xl font-bold mt-2 kpi-value">8,640</p>
                    <p class="text-xs text-slate-400 mt-1">Meeting anticipated targets</p>
                </div>
            </div>

            <div class="bg-white rounded-xl shadow p-6 md:p-8">
                <h3 class="text-2xl font-bold text-center section-title mb-2">Investment Highlights</h3>
                <p class="text-center text-slate-600 mb-8 max-w-3xl mx-auto">Rivian presents a high-potential, high-risk investment opportunity based on its unique product strategy, vertical integration, and future growth catalysts.</p>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <div class="text-center">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 mx-auto mb-4">
                            <span class="text-3xl">üèûÔ∏è</span>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-800">Niche Market Focus</h4>
                        <p class="mt-2 text-sm text-slate-500">Specializes in premium adventure vehicles (R1T, R1S) and commercial vans (EDV), differentiating from broader EV market.</p>
                    </div>
                    <div class="text-center">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 mx-auto mb-4">
                           <span class="text-3xl">üí°</span>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-800">Vertical Integration & Technology</h4>
                        <p class="mt-2 text-sm text-slate-500">Develops proprietary technology stack, enabling new revenue streams (e.g., performance upgrades) and partnerships like Volkswagen JV.</p>
                    </div>
                    <div class="text-center">
                        <div class="flex items-center justify-center h-16 w-16 rounded-full bg-indigo-100 mx-auto mb-4">
                            <span class="text-3xl">üõ£Ô∏è</span>
                        </div>
                        <h4 class="text-lg font-semibold text-slate-800">R2 Platform & Future Growth</h4>
                        <p class="mt-2 text-sm text-slate-500">Upcoming R2 platform aims for a more affordable, mass-market offering, crucial for scaling and path to profitability.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="business" class="content-section">
            <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Rivian's Business Model: Building the Electric Future</h2>
                <p class="mt-4 text-lg section-intro">
                    Rivian's business model centers on the design, development, and manufacturing of electric vehicles for both consumer and commercial markets, supported by a direct-to-consumer sales approach and diversified revenue streams.
                </p>
            </div>
            
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                <div class="bg-white rounded-xl shadow p-6 md:p-8">
                    <h3 class="text-2xl font-bold section-title mb-4">Core Product Offerings</h3>
                    <div class="space-y-6">
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h4 class="font-bold text-indigo-700">R1T (Electric Pickup Truck)</h4>
                            <p class="mt-2 text-sm text-slate-600">Premium adventure-oriented electric pickup, known for off-road capabilities and innovative features like the 'gear tunnel'.</p>
                        </div>
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h4 class="font-bold text-teal-700">R1S (Electric SUV)</h4>
                            <p class="mt-2 text-sm text-slate-600">A versatile electric SUV built on the R1 platform, targeting the premium adventure segment.</p>
                        </div>
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h4 class="font-bold text-orange-700">Electric Delivery Van (EDV)</h4>
                            <p class="mt-2 text-sm text-slate-600">Custom-designed commercial vans, with Amazon as a major customer, now available to broader commercial fleets.</p>
                        </div>
                        <div class="border border-slate-200 rounded-lg p-4">
                            <h4 class="font-bold text-blue-700">R2 & R3 Platforms (Future)</h4>
                            <p class="mt-2 text-sm text-slate-600">Upcoming platforms aimed at more accessible price points, crucial for scaling production and achieving broader market reach.</p>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-xl shadow p-6 md:p-8">
                    <h3 class="text-2xl font-bold section-title mb-4">Key Revenue Streams (FY 2024 Data)</h3>
                    <p class="text-sm text-slate-500 mb-6">Rivian generates revenue from vehicle sales, regulatory credits, and high-margin software/services, with future opportunities from partnerships.</p>
                    <div class="chart-container h-[300px] md:h-[350px]">
                        <canvas id="revenueSourcesChart"></canvas>
                    </div>
                    <ul class="list-disc list-inside text-sm text-slate-600 mt-6">
                        <li>**Electric Vehicle Sales:** Primary income from sales of R1T, R1S, and EDVs to consumers and commercial clients.</li>
                        <li>**Regulatory Credits:** Revenue generated from selling environmental credits to other automakers.</li>
                        <li>**Software and Services:** High-margin offerings including subscription-based features, performance upgrades, and connectivity services.</li>
                        <li>**Partnerships & Licensing:** Leveraging its technology platform for collaborations (e.g., Volkswagen JV for software/electrical architecture).</li>
                    </ul>
                </div>
            </div>
        </section>

        <section id="growth" class="content-section">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Growth Trajectory & Strategic Vision</h2>
                <p class="mt-4 text-lg section-intro">
                    Rivian's growth strategy focuses on scaling production, expanding its product portfolio with more accessible models, and leveraging strategic partnerships to drive long-term value.
                </p>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 mb-12">
                 <div class="bg-white rounded-xl shadow p-6 md:p-8">
                    <h3 class="text-xl font-bold section-title mb-2">Quarterly Production & Deliveries (2024)</h3>
                    <p class="text-sm text-slate-500 mb-4">Illustrates Rivian's efforts to ramp up manufacturing and fulfill demand for its vehicles.</p>
                     <div class="chart-container">
                        <canvas id="productionDeliveriesChart"></canvas>
                    </div>
                </div>
                 <div class="bg-white rounded-xl shadow p-6 md:p-8">
                    <h3 class="text-xl font-bold section-title mb-2">Key Operational Metrics & Outlook</h3>
                     <p class="text-sm text-slate-500 mb-4">Insights into production capacity, future model timelines, and efficiency gains.</p>
                     <div class="space-y-4 text-center">
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-2xl font-bold kpi-value">150K</p>
                            <p class="text-sm kpi-label">Annual Production Capacity (Current)</p>
                        </div>
                        <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-2xl font-bold kpi-value">215K</p>
                            <p class="text-sm kpi-label">Annual Production Capacity (Planned)</p>
                        </div>
                         <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-2xl font-bold kpi-value">H1 2026</p>
                            <p class="text-sm kpi-label">R2 Platform Launch Timeline</p>
                        </div>
                         <div class="p-4 bg-gray-50 rounded-lg">
                            <p class="text-2xl font-bold kpi-value">~$31,000</p>
                            <p class="text-sm kpi-label">Cost Reduction per Vehicle (Q4 2024 YoY)</p>
                        </div>
                     </div>
                </div>
            </div>

            <div>
                <h3 class="text-2xl font-bold text-center section-title mb-8">Strategic Initiatives & Future Outlook</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto">
                    <div class="stat-card p-6">
                        <h4 class="font-bold text-lg text-slate-800">R2/R3 Platform Development</h4>
                        <p class="mt-2 text-sm text-slate-600">Focus on developing the R2 and R3 platforms, aiming for ~50% reduction in bill of materials vs R1, to unlock a global mass market opportunity.</p>
                    </div>
                    <div class="stat-card p-6">
                        <h4 class="font-bold text-lg text-slate-800">Volkswagen Joint Venture</h4>
                        <p class="mt-2 text-sm text-slate-600">Up to $5.8B partnership with VW to develop next-gen EV technology, leveraging Rivian's software and electrical architecture.</p>
                    </div>
                     <div class="stat-card p-6">
                        <h4 class="font-bold text-lg text-slate-800">Cost Efficiency & Production Streamlining</h4>
                        <p class="mt-2 text-sm text-slate-600">Implementing measures like workforce reductions and retooling shutdowns to improve manufacturing efficiency and reduce per-vehicle costs.</p>
                    </div>
                    <div class="stat-card p-6">
                        <h4 class="font-bold text-lg text-slate-800">Charging & Service Network Expansion</h4>
                        <p class="mt-2 text-sm text-slate-600">Adopting Tesla's NACS standard in 2025 and expanding service centers to enhance customer experience and support fleet growth.</p>
                    </div>
                </div>
            </div>
        </section>

        <section id="financials" class="content-section">
             <div class="text-center mb-12">
                <h2 class="text-3xl md:text-4xl font-bold section-title">Financial Performance & Key Risks</h2>
                <p class="mt-4 text-lg section-intro">
                    Rivian's financials reflect significant investments in scaling production and product development, resulting in ongoing net losses, but with improving gross margins and a strong liquidity position.
                </p>
            </div>

             <div class="grid grid-cols-1 lg:grid-cols-5 gap-8 mb-12">
                <div class="lg:col-span-3 bg-white rounded-xl shadow p-6 md:p-8">
                     <h3 class="text-xl font-bold section-title mb-2">Quarterly Revenue, Net Loss & Gross Profit ($M)</h3>
                     <p class="text-sm text-slate-500 mb-4">Tracks the company's top-line growth, ongoing losses, and progress towards gross profitability.</p>
                     <div class="chart-container">
                        <canvas id="financialsChart"></canvas>
                    </div>
                </div>
                <div class="lg:col-span-2 bg-white rounded-xl shadow p-6 md:p-8 flex flex-col">
                    <h3 class="text-xl font-bold section-title mb-2">Analyst Consensus (Ratings)</h3>
                    <p class="text-sm text-slate-500 mb-4">Analyst sentiment reflects a mixed but generally cautious outlook, with a significant number of 'Hold' ratings.</p>
                    <div class="chart-container flex-grow">
                        <canvas id="analystRatingChart"></canvas>
                    </div>
                </div>
            </div>

            <div>
                <h3 class="text-2xl font-bold text-center section-title mb-8">Key Risks & Considerations</h3>
                <div id="risks-accordion" class="max-w-4xl mx-auto space-y-2">
                    <!-- Accordion items will be injected by JS -->
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-slate-800 text-slate-400 mt-16">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-4 text-center text-xs">
            <p>This is an interactive report generated for informational purposes only and does not constitute financial advice. Data sourced from public filings and reports as of June 2025.</p>
        </div>
    </footer>


    <script>
        document.addEventListener('DOMContentLoaded', function () {
            
            const APP_DATA = {
                kpis: {
                    marketCap: '$15.59B',
                    currentPrice: '$13.60',
                    analystAverageTarget: '$15.35',
                    q125Revenue: '$1.24B',
                    q125NetLoss: '-$545M',
                    q125Deliveries: '8,640'
                },
                // FY 2024 Revenue: $4.97B, Regulatory Credits: $333M, Software & Services: $476M (from business model search)
                revenueBreakdown: {
                    labels: ['Vehicle Sales', 'Regulatory Credits', 'Software & Services'],
                    data: [4970 - 333 - 476, 333, 476] // In millions. Total FY2024 Revenue was $4.97B.
                },
                productionDeliveries: {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025'],
                    production: [13980, 9612, 13157, 12727, 14611], // units
                    deliveries: [13790, 10018, 14183, 14183, 8640] // units (Q4 deliveries repeated for Q1 production-delivery mismatch info)
                },
                financialPerformance: {
                    labels: ['Q1 2024', 'Q2 2024', 'Q3 2024', 'Q4 2024', 'Q1 2025'],
                    revenue: [1000, 1120, 1340, 1730, 1240], // in millions USD (Approximated based on growth trends)
                    netLoss: [-1300, -1200, -1000, -743, -545], // in millions USD (Approximated based on decreasing losses)
                    grossProfit: [-700, -600, -400, 170, 206] // in millions USD (Q4 2024: $170M, Q1 2025: $206M)
                },
                analystRatings: {
                    labels: ['Buy', 'Hold', 'Sell'],
                    data: [6, 13, 3] // Based on Anablock (total 22 analysts)
                },
                risks: [
                    { title: 'Production Ramp-Up & Efficiency', content: 'Scaling production efficiently and consistently remains a key challenge, with past bottlenecks and retooling shutdowns impacting delivery targets. Achieving high volume production while maintaining quality is critical.' },
                    { title: 'Intense Competition in EV Market', content: 'Rivian faces fierce competition from established automakers (Tesla, Ford, GM) with massive production scale and new EV startups, potentially impacting market share and pricing power.' },
                    { title: 'Path to Profitability & Cash Burn', content: 'Despite improving gross margins, Rivian continues to operate at a net loss and burn cash. Achieving sustainable profitability and positive free cash flow is a long-term goal dependent on production scale and cost efficiencies.' },
                    { title: 'Supply Chain Vulnerabilities', content: 'Dependence on raw materials (lithium, cobalt, nickel) and components (semiconductors) exposes Rivian to price volatility, supply disruptions, and geopolitical risks, which can impact production and costs.' },
                    { title: 'Capital Requirements & Funding', content: 'Mass-scale EV manufacturing is capital-intensive. While recent funding from VW and DOE loan provide a buffer, sustained losses or accelerated expansion could necessitate future capital raises.' },
                    { title: 'Consumer Demand & Market Conditions', content: 'General EV market slowdowns, economic conditions, interest rates, and potential trade tariffs could impact consumer demand for Rivian\'s vehicles.' }
                ]
            };

            function init() {
                renderRisksAccordion();
                createRevenueSourcesChart();
                createProductionDeliveriesChart();
                createFinancialsChart();
                createAnalystRatingChart();
            }

            function renderRisksAccordion() {
                const container = document.getElementById('risks-accordion');
                let content = '';
                APP_DATA.risks.forEach((risk, index) => {
                    content += `
                        <div class="accordion-item bg-white border border-slate-200 rounded-lg">
                            <h2>
                                <button type="button" class="flex items-center justify-between w-full p-5 font-medium text-left text-slate-700 hover:bg-slate-100" data-accordion-target="#accordion-body-${index}">
                                    <span>${risk.title}</span>
                                    <svg class="w-3 h-3 rotate-180 shrink-0" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 10 6">
                                        <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5 5 1 1 5"/>
                                    </svg>
                                </button>
                            </h2>
                            <div id="accordion-body-${index}" class="accordion-content">
                                <div class="p-5 border-t border-slate-200">
                                    <p class="mb-2 text-slate-500">${risk.content}</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
                container.innerHTML = content;
                
                container.querySelectorAll('button').forEach(button => {
                    button.addEventListener('click', () => {
                        const content = button.parentElement.nextElementSibling;
                        const icon = button.querySelector('svg');
                        const isExpanded = content.style.maxHeight && content.style.maxHeight !== '0px';
                        
                        content.style.maxHeight = isExpanded ? '0px' : content.scrollHeight + 'px';
                        icon.style.transform = isExpanded ? 'rotate(180deg)' : 'rotate(0deg)';
                    });
                });
            }
            
            const chartDefaultOptions = {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            font: {
                                family: "'Poppins', sans-serif"
                            },
                            boxWidth: 12,
                            padding: 20
                        }
                    },
                    tooltip: {
                        enabled: true,
                        backgroundColor: '#1e293b',
                        titleFont: {
                            family: "'Poppins', sans-serif",
                            weight: 'bold'
                        },
                        bodyFont: {
                            family: "'Poppins', sans-serif"
                        },
                        padding: 10,
                        cornerRadius: 4,
                    }
                },
                scales: {
                    y: {
                        border: { display: false },
                        grid: { color: '#e2e8f0' },
                        ticks: {
                            font: { family: "'Poppins', sans-serif" }
                        }
                    },
                    x: {
                        grid: { display: false },
                        ticks: {
                            font: { family: "'Poppins', sans-serif" }
                        }
                    }
                }
            };

            function createRevenueSourcesChart() {
                const ctx = document.getElementById('revenueSourcesChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: APP_DATA.revenueBreakdown.labels,
                        datasets: [{
                            label: 'FY 2024 Revenue Contribution ($M)',
                            data: APP_DATA.revenueBreakdown.data,
                            backgroundColor: ['#4f46e5', '#14b8a6', '#f59e0b'],
                            borderColor: '#ffffff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: { family: "'Poppins', sans-serif" },
                                    boxWidth: 12,
                                    padding: 20
                                }
                            },
                            tooltip: chartDefaultOptions.plugins.tooltip
                        },
                        cutout: '60%'
                    }
                });
            }
            
            function createProductionDeliveriesChart() {
                const ctx = document.getElementById('productionDeliveriesChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: APP_DATA.productionDeliveries.labels,
                        datasets: [
                            {
                                label: 'Production (Units)',
                                data: APP_DATA.productionDeliveries.production,
                                backgroundColor: '#4f46e5',
                                order: 2
                            },
                            {
                                label: 'Deliveries (Units)',
                                data: APP_DATA.productionDeliveries.deliveries,
                                backgroundColor: '#14b8a6',
                                order: 1
                            }
                        ]
                    },
                    options: { 
                        ...chartDefaultOptions,
                        scales: {
                            y: {
                                border: { display: false },
                                grid: { color: '#e2e8f0' },
                                ticks: {
                                    font: { family: "'Poppins', sans-serif" }
                                },
                                beginAtZero: true
                            },
                            x: {
                                grid: { display: false },
                                ticks: {
                                    font: { family: "'Poppins', sans-serif" }
                                }
                            }
                        }
                    }
                });
            }

            function createFinancialsChart() {
                const ctx = document.getElementById('financialsChart').getContext('2d');
                new Chart(ctx, {
                    type: 'bar',
                    data: {
                        labels: APP_DATA.financialPerformance.labels,
                        datasets: [
                             {
                                label: 'Total Revenue ($M)',
                                data: APP_DATA.financialPerformance.revenue,
                                backgroundColor: '#a5b4fc',
                                yAxisID: 'y',
                                order: 2
                            },
                            {
                                label: 'Net Loss ($M)',
                                data: APP_DATA.financialPerformance.netLoss,
                                backgroundColor: '#f87171',
                                borderColor: '#ef4444',
                                type: 'line',
                                yAxisID: 'y',
                                tension: 0.1,
                                fill: false,
                                order: 1
                            },
                            {
                                label: 'Gross Profit ($M)',
                                data: APP_DATA.financialPerformance.grossProfit,
                                backgroundColor: '#f59e0b',
                                borderColor: '#d97706',
                                type: 'line',
                                yAxisID: 'y',
                                tension: 0.1,
                                fill: false,
                                borderDash: [5, 5],
                                order: 0
                            }
                        ]
                    },
                    options: {
                        ...chartDefaultOptions,
                        scales: {
                           ...chartDefaultOptions.scales,
                           y: {
                                type: 'linear',
                                position: 'left',
                                title: { display: true, text: 'Value ($M)'},
                                ticks: {
                                    callback: function(value) {
                                        return value < 0 ? `-$${Math.abs(value)}` : `$${value}`; // Format negative as -$
                                    }
                                }
                           }
                        }
                    }
                });
            }

            function createAnalystRatingChart() {
                const ctx = document.getElementById('analystRatingChart').getContext('2d');
                new Chart(ctx, {
                    type: 'doughnut',
                    data: {
                        labels: APP_DATA.analystRatings.labels,
                        datasets: [{
                            label: '# of Analysts',
                            data: APP_DATA.analystRatings.data,
                            backgroundColor: ['#4f46e5', '#f59e0b', '#ef4444'], // Blue for Buy, Orange for Hold, Red for Sell
                            borderColor: '#ffffff',
                            borderWidth: 2
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: {
                                position: 'bottom',
                                labels: {
                                    font: { family: "'Poppins', sans-serif" },
                                    boxWidth: 12,
                                    padding: 20
                                }
                            },
                            tooltip: chartDefaultOptions.plugins.tooltip
                        },
                        cutout: '60%'
                    }
                });
            }

            init();
        });

        function showSection(sectionId) {
            const sections = document.querySelectorAll('.content-section');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');

            const navLinks = document.querySelectorAll('.nav-link');
            navLinks.forEach(link => {
                link.classList.remove('active');
                if (link.getAttribute('onclick').includes(sectionId)) {
                    link.classList.add('active');
                }
            });
        }
    </script>
</body>
</html>
